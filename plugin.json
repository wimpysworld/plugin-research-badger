{
  "id": "c98a694c-74c7-426f-8aaa-24b52f2a3942",
  "uuid": "c98a694c-74c7-426f-8aaa-24b52f2a3942",
  "title": "Research Badger",
  "iconURL": "https://raw.githubusercontent.com/wimpysworld/plugin-research-badger/refs/heads/main/icon.png",
  "oauthConfig": null,
  "userSettings": [
    {
      "name": "jinaAPIKey",
      "type": "password",
      "label": "Jina AI API Key",
      "required": true,
      "description": "Jina AI API powers both web search and content extraction. Get your free API key at https://jina.ai/?sui=apikey"
    },
    {
      "name": "researchMode",
      "type": "enum",
      "label": "Digging Intensity",
      "values": ["Scout Dig", "Deep Burrow", "Adaptive Dig"],
      "description": "Select \"Deep Burrow\" if you prefer to have more accurate result (consume more tokens). Default: \"Scout Dig\".",
      "defaultValue": "Scout Dig"
    }
  ],
  "pluginFunctions": [
    {
      "id": "2836fff3-19fe-49ae-894e-3f07ebe73b8e",
      "code": "function update_research_plan() {\n  // This tool does not yet have internal state, returning an acknowledgement is usually enough for LLMs to register and keep track of the todo items. May not work well with less-intelligent models or lists that are too long.\n  return \"Plan updated successfully.\"\n}",
      "name": "Research Plan",
      "openaiSpec": {
        "name": "update_research_plan",
        "parameters": {
          "type": "object",
          "required": ["todos"],
          "properties": {
            "todos": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["content", "status", "id"],
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "Unique identifier for the TODO item"
                  },
                  "status": {
                    "enum": [
                      "pending",
                      "in_progress",
                      "completed",
                      "cancelled"
                    ],
                    "type": "string",
                    "description": "The current status of the TODO item"
                  },
                  "content": {
                    "type": "string",
                    "description": "The description/content of the TODO item"
                  }
                }
              },
              "minItems": 2,
              "description": "Array of TODO items to write to the workspace to create or update the todo list. If the ID of the todos already exists, they will be merged into the existing todos based on the id field, you can leave unchanged properties undefined."
            },
            "explanation": {
              "type": "string",
              "description": "A short description of the action you take (e.g., \"Creating a plan...\", \"Started item X\",...)"
            }
          }
        },
        "description": "Use this tool to create and manage a structured task list for your current research session. This helps track progress, organize complex investigations, and demonstrate thoroughness.\n\n### When to Use This Tool\n\nUse proactively for:\n1. Complex multi-step research (3+ distinct phases)\n2. Non-trivial investigations requiring careful planning\n3. User explicitly requests research todo list\n4. User provides multiple research topics (numbered/comma-separated)\n5. After receiving new research instructions - capture requirements as todos (use merge=false to add new ones)\n6. After completing research phases - mark complete with merge=true and add follow-ups\n7. When starting new research areas - mark as in_progress (ideally only one at a time)\n\n### When NOT to Use\n\nSkip for:\n1. Single, straightforward questions\n2. Trivial lookups with no organizational benefit\n3. Research completable in < 3 trivial steps\n4. Purely conversational/clarification requests\n5. Don't add a task to verify findings unless asked, or you'll overfocus on validation\n\n### Examples\n\n<example>\n  User: Research the impact of climate change on Arctic wildlife\n  Assistant: *Creates todo list:*\n  1. Analyze temperature trends in Arctic regions\n  2. Identify key Arctic species and habitats\n  3. Review scientific studies on wildlife impacts\n  4. Synthesize findings and correlations\n<reasoning>\n  Multi-phase research with dependencies requiring systematic investigation.\n</reasoning>\n</example>\n\n<example>\n  User: Compare healthcare systems across Nordic countries\n  Assistant: *Creates todo list with specific items for each country's system, funding models, outcomes, and comparative analysis*\n\n<reasoning>\n  Complex comparative research requiring systematic tracking across multiple systems.\n</reasoning>\n</example>\n\n<example>\n  User: Investigate renewable energy adoption, economic impacts, policy frameworks, and future projections.\n  Assistant: *Creates todo list breaking down each research area into specific investigation tasks*\n\n<reasoning>\n  Multiple complex research areas provided as list requiring organized investigation management.\n</reasoning>\n</example>\n\n<example>\n  User: Research why my company's market share is declining - analyze competitors, market trends, customer feedback.\n  Assistant: *Creates todo list: 1) Competitor analysis, 2) Market trend research, 3) Customer sentiment analysis, 4) Internal factor review, 5) Strategic recommendations*\n\n<reasoning>\n  Business analysis requires multiple research phases across different data sources.\n</reasoning>\n</example>\n\n### Examples of When NOT to Use the Todo List\n\n<example>\n  User: What's the capital of France?\n  Assistant: The capital of France is Paris.\n\n<reasoning>\n  Single trivial factual lookup completed in one step.\n</reasoning>\n</example>\n\n<example>\n  User: Explain what photosynthesis is.\n  Assistant: Photosynthesis is the process by which plants convert sunlight into energy...\n\n<reasoning>\n  Informational request with no complex research investigation needed.\n</reasoning>\n</example>\n\n<example>\n  User: Find the current stock price of Apple.\n  Assistant: *Looks up current AAPL price* Apple (AAPL) is currently trading at...\n\n<reasoning>\n  Single straightforward data lookup with immediate results.\n</reasoning>\n</example>\n\n<example>\n  User: What does GDP stand for?\n  Assistant: GDP stands for Gross Domestic Product...\n\n<reasoning>\n  Simple definition request with no multi-step research required.\n</reasoning>\n</example>\n\n### Task States and Management\n\n1. **Research States:**\n  - pending: Not yet started\n  - in_progress: Currently investigating\n  - completed: Research finished successfully\n  - cancelled: No longer needed\n\n2. **Research Management:**\n  - Update status in real-time\n  - Mark complete IMMEDIATELY after finishing each phase\n  - Only ONE research area in_progress at a time\n  - Complete current investigations before starting new ones\n\n3. **Research Breakdown:**\n  - Create specific, actionable investigation items\n  - Break complex research into manageable phases\n  - Use clear, descriptive research objectives\n\nWhen in doubt, use this tool. Proactive research management demonstrates thoroughness and ensures complete investigation of requirements."
      },
      "outputType": "respond_to_ai",
      "implementationType": "javascript"
    },
    {
      "id": "7a819d92-c53e-4e13-be8a-112eefa39c17",
      "name": "Search Web",
      "implementationType": "javascript",
      "code": "async function badger_search_web(params, userSettings) {\n  try {\n    if (!userSettings.jinaAPIKey) {\n      throw new Error('Jina API key not configured');\n    }\n    if (!params.query) {\n      throw new Error('Search query is required');\n    }\n\n    const response = await fetch('https://s.jina.ai/', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + userSettings.jinaAPIKey,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-Respond-With': 'no-content'\n      },\n      body: JSON.stringify({\n        q: params.query,\n        num: 10\n      })\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error('Jina Search API error ' + response.status + ': ' + errorText);\n    }\n\n    const data = await response.json();\n\n    if (!data.data || !Array.isArray(data.data)) {\n      return {\n        error: 'Unexpected response format from Jina Search API',\n        raw: data\n      };\n    }\n\n    const results = data.data.map(item => ({\n      title: item.title || '',\n      url: item.url || '',\n      description: item.description || '',\n      snippet: item.content ? item.content.substring(0, 500) : ''\n    }));\n\n    return {\n      query: params.query,\n      results: results,\n      totalResults: results.length\n    };\n  } catch (error) {\n    return {\n      error: 'Search failed: ' + error.message,\n      details: 'Check your Jina API key and try again'\n    };\n  }\n}",
      "openaiSpec": {
        "name": "badger_search_web",
        "parameters": {
          "type": "object",
          "required": ["query"],
          "properties": {
            "query": {
              "type": "string",
              "description": "The search term to look up on the web. Be specific and include relevant keywords for better results."
            },
            "explanation": {
              "type": "string",
              "description": "One sentence explanation as to why this tool is being used, and how it contributes to the goal."
            }
          }
        },
        "description": "Search the web using Jina AI Search for real-time information about any topic. Use this tool when you need up-to-date information, current events, technology updates, or any topic that requires recent information. Results include titles, URLs, descriptions, and snippets from web pages."
      },
      "outputType": "respond_to_ai"
    },
    {
      "id": "f4e8c2a1-6d93-4b7e-9a12-3c5f8e7d2b4a",
      "name": "Extract Web Page",
      "implementationType": "javascript",
      "code": "async function extract_web_page(params, userSettings) {\n  try {\n    if (!userSettings.jinaAPIKey) {\n      throw new Error('Jina API key not configured');\n    }\n    if (!params.pageUrl) {\n      throw new Error('Page URL is required');\n    }\n\n    const headers = {\n      'Authorization': 'Bearer ' + userSettings.jinaAPIKey,\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      'X-Remove-Selector': 'nav,header,footer,aside,.ads'\n    };\n\n    if (userSettings.researchMode === 'Scout Dig' || userSettings.researchMode === 'Adaptive Dig') {\n      headers['X-Token-Budget'] = '4000';\n    } else if (userSettings.researchMode === 'Deep Burrow') {\n      headers['X-Engine'] = 'browser';\n      headers['X-With-Links-Summary'] = 'true';\n    }\n\n    const response = await fetch('https://r.jina.ai/', {\n      method: 'POST',\n      headers: headers,\n      body: JSON.stringify({ url: params.pageUrl })\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error('Jina API error ' + response.status + ': ' + errorText);\n    }\n\n    const data = await response.json();\n\n    const result = {\n      title: data.data?.title || '',\n      url: params.pageUrl,\n      content: data.data?.content || '',\n      usage_tokens: data.data?.usage?.tokens || 0\n    };\n\n    if (userSettings.researchMode === 'Adaptive Dig') {\n      result.furtherInstructions = 'This result is extracted with token limits. Use \"read_full_web_page_content\" if you need complete content.';\n    }\n\n    if (params.extractInstructions) {\n      result.extractInstructions = params.extractInstructions;\n      result.note = 'AI should extract relevant data from markdown content based on extractInstructions';\n    }\n\n    return result;\n  } catch (error) {\n    return {\n      error: 'Extraction failed: ' + error.message,\n      details: 'Check your Jina API key and URL validity'\n    };\n  }\n}",
      "openaiSpec": {
        "name": "extract_web_page",
        "parameters": {
          "type": "object",
          "required": ["pageUrl"],
          "properties": {
            "pageUrl": {
              "type": "string",
              "description": "The URL of the page to extract content from"
            },
            "extractInstructions": {
              "type": "string",
              "description": "Optional instructions for what specific information to extract from the page"
            },
            "explanation": {
              "type": "string",
              "description": "One sentence explanation as to why this tool is being used, and how it contributes to the goal"
            }
          }
        },
        "description": "Extract content from a web page using Jina AI Reader. Token budget varies by digging mode: Scout Dig and Adaptive Dig use 4000 token limits for efficiency, Deep Burrow mode uses browser engine for complete extraction."
      },
      "outputType": "respond_to_ai"
    },
    {
      "id": "b7d3e9f2-4c8a-4d6e-9b1f-7e5a3c2d8b4f",
      "name": "Read Full Web Page",
      "implementationType": "javascript",
      "code": "async function read_full_web_page_content(params, userSettings) {\n  if (userSettings.researchMode === 'Scout Dig') {\n    return {\n      error: '\"read_full_web_page_content\" is not allowed in Scout Dig mode',\n      details: 'Switch to Deep Burrow or Adaptive Dig mode to read full content'\n    };\n  }\n\n  try {\n    if (!userSettings.jinaAPIKey) {\n      throw new Error('Jina API key not configured');\n    }\n    if (!params.pageUrl) {\n      throw new Error('Page URL is required');\n    }\n\n    const response = await fetch('https://r.jina.ai/', {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + userSettings.jinaAPIKey,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-Engine': 'browser',\n        'X-With-Links-Summary': 'true',\n        'X-With-Images-Summary': 'true',\n        'X-Remove-Selector': 'nav,header,footer,aside,.ads'\n      },\n      body: JSON.stringify({ url: params.pageUrl })\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error('Jina API error ' + response.status + ': ' + errorText);\n    }\n\n    const data = await response.json();\n\n    return {\n      title: data.data?.title || '',\n      url: params.pageUrl,\n      content: data.data?.content || '',\n      links: data.data?.links || {},\n      images: data.data?.images || {},\n      usage_tokens: data.data?.usage?.tokens || 0\n    };\n  } catch (error) {\n    return {\n      error: 'Full read failed: ' + error.message,\n      details: 'Check your Jina API key and URL validity'\n    };\n  }\n}",
      "openaiSpec": {
        "name": "read_full_web_page_content",
        "parameters": {
          "type": "object",
          "required": ["pageUrl"],
          "properties": {
            "pageUrl": {
              "type": "string",
              "description": "The URL of the page to read in full"
            },
            "explanation": {
              "type": "string",
              "description": "One sentence explanation as to why this tool is being used, and how it contributes to the goal"
            }
          }
        },
        "description": "Read complete content from a web page using Jina AI Reader's browser engine. Only available in Deep Burrow and Adaptive Dig modes. Returns full content with links and images summaries."
      },
      "outputType": "respond_to_ai"
    }
  ],
  "authenticationType": "AUTH_TYPE_NONE",
  "dynamicContextEndpoints": [
    {
      "id": "800bd740-c179-4c63-b566-0a74223fc261",
      "url": "",
      "name": "Research Badger Mode",
      "method": "GET",
      "source": "static",
      "staticContent": "<USER_INPUT>\n**Research Badger**: Enabled.\n**Digging Intensity**: {researchMode}\n</USER_INPUT>\n\nYou are Research Badger, an AI research assistant that relentlessly digs through sources to conduct thorough, comprehensive research on any given topic. Your goal is to gather comprehensive information, analyze it, and present a well-structured report.\n\nDigging Intensity Instructions:\n- **Scout Dig**: In Scout Dig mode, Research Badger will attempt to extract data from online sources using the extract_web_page tool, with token limits (~4000 tokens per page) to extract data efficiently. This is the default mode.\n- **Deep Burrow**: Research Badger will read the full content of the online sources using Jina AI Reader's browser engine to determine the final answer. If the web pages have a lot of content, it can risk consuming a lot of tokens, which is expensive and may exceed the model's context length limit.\n- **Adaptive Dig**: Research Badger will run in Scout Dig mode by default, but may opt in to read full web page content when needed (using the \"read_full_web_page_content\" tool) to get the most accurate answer.\n\nFollow these instructions carefully:\n\n1. Begin by reading the research task:\n<research_task>\n{lastUserMessage}\n</research_task>\n\n2. Create an initial research plan using the planning tool to create a todo list. This plan should outline the main areas of investigation and the steps you'll take to complete the task. Update the status of each todo list item as you progress through your research.\n\n3. Conduct at least one web search to gather information. In Research Badger mode, all information presented must come from the sources of your research. Before using any tools, provide your reasoning for choosing that particular tool.\n\n4. Follow these guidelines while gathering information:\n   - Collect all necessary data to carry out the research task concisely and thoroughly.\n   - Use bullet points or numbered lists for clarity when appropriate.\n   - Don't ask for unnecessary information or information already provided.\n   - Continue researching until all items in your todo list are completed.\n   - Use available tools one at a time to find the requested information.\n   - Gather data from multiple sources to ensure accuracy and comprehensiveness.\n\n5. Cite all sources used with links to the original websites.\n\n6. Once you have gathered all the information, compile a comprehensive report. Use markdown formatting (such as tables and bullet points) and tools (like graphs) to present your findings effectively. Highlight any surprising or interesting details you discovered during your research.\n\n7. Output your final report with the following structure\n   \n   [Title of report]\n   [Include your comprehensive report here, using appropriate formatting]\n   \n   Interesting Findings:\n   [Highlight surprising or noteworthy details]\n   \n   Sources:\n   [List all sources with links]",
      "cacheDurationHours": 1,
      "cacheRefreshPolicy": "REFRESH_NEVER"
    }
  ]
}
